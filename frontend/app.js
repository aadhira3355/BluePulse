const tabs=document.querySelectorAll('.tab');const secs=document.querySelectorAll('.sec');tabs.forEach(t=>t.onclick=()=>{tabs.forEach(x=>x.classList.remove('active'));t.classList.add('active');secs.forEach(s=>s.classList.remove('active'));document.getElementById(t.dataset.sec).classList.add('active');});
const speciesData=[{"name": "Indian Oil Sardine", "scientific": "Sardinella longiceps", "status": "LC", "lat": 9.96, "lon": 76.26, "confidence": 96}, {"name": "Malabar Grouper", "scientific": "Epinephelus malabaricus", "status": "EN", "lat": 8.52, "lon": 76.93, "confidence": 87}, {"name": "Green Sawfish", "scientific": "Pristis zijsron", "status": "CR", "lat": 11.25, "lon": 75.78, "confidence": 78}];
const map=document.getElementById('map');const markersDiv=document.getElementById('markers');if(markersDiv){speciesData.forEach(sp=>{const m=document.createElement('div');m.className='marker';m.title=`${sp.name} ${sp.confidence}%`;m.style.left=Math.random()*90+'%';m.style.top=Math.random()*90+'%';markersDiv.appendChild(m);});}
const oceanCSV=`timestamp,temperature,salinity\n2025-09-01 00:00:00,27.16,34.04\n2025-09-01 01:00:00,27.25,33.97\n2025-09-01 02:00:00,27.37,34.15\n2025-09-01 03:00:00,27.63,34.16\n2025-09-01 04:00:00,27.28,34.15\n2025-09-01 05:00:00,27.52,34.22\n2025-09-01 06:00:00,27.7,34.22\n2025-09-01 07:00:00,27.95,34.32\n2025-09-01 08:00:00,27.66,34.22\n2025-09-01 09:00:00,27.88,34.32\n2025-09-01 10:00:00,27.94,34.31\n2025-09-01 11:00:00,28.05,34.43\n2025-09-01 12:00:00,28.2,34.4\n2025-09-01 13:00:00,28.03,34.31\n2025-09-01 14:00:00,28.21,34.42\n2025-09-01 15:00:00,28.21,34.34\n2025-09-01 16:00:00,28.3,34.4\n2025-09-01 17:00:00,28.22,34.39\n2025-09-01 18:00:00,28.13,34.49\n2025-09-01 19:00:00,28.53,34.35\n2025-09-01 20:00:00,28.68,34.32\n2025-09-01 21:00:00,28.17,34.24\n2025-09-01 22:00:00,28.54,34.15\n2025-09-01 23:00:00,28.3,34.26\n2025-09-02 00:00:00,28.78,34.2\n2025-09-02 01:00:00,28.36,34.1\n2025-09-02 02:00:00,28.21,34.02\n2025-09-02 03:00:00,28.37,34.03\n2025-09-02 04:00:00,28.1,34.09\n2025-09-02 05:00:00,28.31,34.01\n2025-09-02 06:00:00,27.66,33.91\n2025-09-02 07:00:00,28.56,33.87\n2025-09-02 08:00:00,27.87,33.92\n2025-09-02 09:00:00,27.93,33.84\n2025-09-02 10:00:00,27.69,33.75\n2025-09-02 11:00:00,27.84,33.71\n2025-09-02 12:00:00,27.66,33.65\n2025-09-02 13:00:00,27.43,33.74\n2025-09-02 14:00:00,27.68,33.65\n2025-09-02 15:00:00,27.35,33.65\n2025-09-02 16:00:00,27.26,33.7\n2025-09-02 17:00:00,26.79,33.64\n2025-09-02 18:00:00,26.76,33.58\n2025-09-02 19:00:00,26.66,33.6\n2025-09-02 20:00:00,26.64,33.61\n2025-09-02 21:00:00,26.69,33.71\n2025-09-02 22:00:00,26.05,33.68\n2025-09-02 23:00:00,26.2,33.6\n2025-09-03 00:00:00,26.14,33.66\n2025-09-03 01:00:00,26.27,33.78\n2025-09-03 02:00:00,25.93,33.81\n2025-09-03 03:00:00,26.09,33.78\n2025-09-03 04:00:00,25.75,33.87\n2025-09-03 05:00:00,25.53,33.84\n2025-09-03 06:00:00,25.75,33.98\n2025-09-03 07:00:00,25.52,34.04\n2025-09-03 08:00:00,25.39,34.03\n2025-09-03 09:00:00,25.88,34.06\n2025-09-03 10:00:00,25.53,34.06\n2025-09-03 11:00:00,25.3,34.13\n2025-09-03 12:00:00,25.71,34.2\n2025-09-03 13:00:00,25.34,34.17\n2025-09-03 14:00:00,25.65,34.24\n2025-09-03 15:00:00,25.29,34.28\n2025-09-03 16:00:00,25.73,34.29\n2025-09-03 17:00:00,25.78,34.35\n2025-09-03 18:00:00,25.49,34.39\n2025-09-03 19:00:00,25.78,34.3\n2025-09-03 20:00:00,25.47,34.41\n2025-09-03 21:00:00,25.77,34.35\n2025-09-03 22:00:00,25.85,34.45\n2025-09-03 23:00:00,25.88,34.49\n2025-09-04 00:00:00,25.82,34.45\n2025-09-04 01:00:00,25.7,34.39\n2025-09-04 02:00:00,26.23,34.34\n2025-09-04 03:00:00,25.64,34.32\n2025-09-04 04:00:00,25.93,34.33\n2025-09-04 05:00:00,26.52,34.31\n2025-09-04 06:00:00,26.35,34.22\n2025-09-04 07:00:00,26.49,34.19\n2025-09-04 08:00:00,26.17,34.17\n2025-09-04 09:00:00,26.51,34.15\n2025-09-04 10:00:00,26.79,34.04\n2025-09-04 11:00:00,27.01,34.02\n2025-09-04 12:00:00,26.96,33.98\n2025-09-04 13:00:00,27.17,33.92\n2025-09-04 14:00:00,27.5,33.89\n2025-09-04 15:00:00,27.17,33.87\n2025-09-04 16:00:00,27.35,33.91\n2025-09-04 17:00:00,27.63,33.82\n2025-09-04 18:00:00,27.65,33.84\n2025-09-04 19:00:00,27.65,33.72\n2025-09-04 20:00:00,28.07,33.71\n2025-09-04 21:00:00,28.23,33.61\n2025-09-04 22:00:00,27.72,33.66\n2025-09-04 23:00:00,28.13,33.66\n2025-09-05 00:00:00,28.24,33.65\n2025-09-05 01:00:00,28.7,33.55\n2025-09-05 02:00:00,28.4,33.63\n2025-09-05 03:00:00,28.4,33.6\n2025-09-05 04:00:00,28.54,33.66\n2025-09-05 05:00:00,28.37,33.66\n2025-09-05 06:00:00,28.51,33.67\n2025-09-05 07:00:00,28.54,33.64\n2025-09-05 08:00:00,28.39,33.72\n2025-09-05 09:00:00,28.19,33.71\n2025-09-05 10:00:00,27.97,33.78\n2025-09-05 11:00:00,28.35,33.86\n2025-09-05 12:00:00,27.93,33.83\n2025-09-05 13:00:00,28.09,33.83\n2025-09-05 14:00:00,28.29,33.94\n2025-09-05 15:00:00,28.3,33.99\n2025-09-05 16:00:00,28.69,34.02\n2025-09-05 17:00:00,28.38,34.03\n2025-09-05 18:00:00,28.4,34.14\n2025-09-05 19:00:00,28.01,34.22\n2025-09-05 20:00:00,27.76,34.26\n2025-09-05 21:00:00,27.9,34.23\n2025-09-05 22:00:00,28.15,34.23\n2025-09-05 23:00:00,27.48,34.41\n2025-09-06 00:00:00,27.26,34.32\n2025-09-06 01:00:00,27.58,34.3\n2025-09-06 02:00:00,27.08,34.34\n2025-09-06 03:00:00,26.84,34.41\n2025-09-06 04:00:00,27.37,34.4\n2025-09-06 05:00:00,26.74,34.39\n2025-09-06 06:00:00,26.89,34.41\n2025-09-06 07:00:00,26.5,34.37\n2025-09-06 08:00:00,26.57,34.35\n2025-09-06 09:00:00,26.9,34.41\n2025-09-06 10:00:00,26.31,34.42\n2025-09-06 11:00:00,26.51,34.36\n2025-09-06 12:00:00,26.05,34.31\n2025-09-06 13:00:00,26.41,34.26\n2025-09-06 14:00:00,26.5,34.24\n2025-09-06 15:00:00,25.84,34.09\n2025-09-06 16:00:00,25.92,34.1\n2025-09-06 17:00:00,25.83,34.11\n2025-09-06 18:00:00,25.73,34.03\n2025-09-06 19:00:00,25.58,34.02\n2025-09-06 20:00:00,25.54,33.96\n2025-09-06 21:00:00,25.18,33.88\n2025-09-06 22:00:00,25.61,33.87\n2025-09-06 23:00:00,25.58,33.85\n2025-09-07 00:00:00,25.72,33.88\n2025-09-07 01:00:00,25.84,33.66\n2025-09-07 02:00:00,25.84,33.83\n2025-09-07 03:00:00,25.68,33.65\n2025-09-07 04:00:00,25.46,33.69\n2025-09-07 05:00:00,25.25,33.59\n2025-09-07 06:00:00,25.51,33.65\n2025-09-07 07:00:00,25.8,33.6\n2025-09-07 08:00:00,25.7,33.58\n2025-09-07 09:00:00,25.88,33.63\n2025-09-07 10:00:00,25.59,33.53\n2025-09-07 11:00:00,25.73,33.52\n2025-09-07 12:00:00,25.82,33.65\n2025-09-07 13:00:00,25.69,33.65\n2025-09-07 14:00:00,25.75,33.6\n2025-09-07 15:00:00,25.64,33.67\n2025-09-07 16:00:00,25.76,33.69\n2025-09-07 17:00:00,26.23,33.76\n2025-09-07 18:00:00,26.44,33.85\n2025-09-07 19:00:00,26.5,33.86\n2025-09-07 20:00:00,26.91,33.82\n2025-09-07 21:00:00,27.24,33.88\n2025-09-07 22:00:00,26.67,33.96\n2025-09-07 23:00:00,26.64,33.98`;
const lines=oceanCSV.split('
').slice(1);const labels=lines.map(l=>l.split(',')[0].slice(11,16));const temps=lines.map(l=>parseFloat(l.split(',')[1]));const sals=lines.map(l=>parseFloat(l.split(',')[2]));if(document.getElementById('tempChart')){new Chart(tempChart,{type:'line',data:{labels:labels.slice(-24),datasets:[{label:'Temp',data:temps.slice(-24),borderColor:'red',fill:false}]}});new Chart(salChart,{type:'line',data:{labels:labels.slice(-24),datasets:[{label:'Sal',data:sals.slice(-24),borderColor:'blue',fill:false}]}});}const ednaSample=[{"species": "Sardinella longiceps", "confidence": 95, "abundance": 120, "status": "LC"}, {"species": "Pristis zijsron", "confidence": 82, "abundance": 3, "status": "CR"}, {"species": "Epinephelus malabaricus", "confidence": 88, "abundance": 20, "status": "EN"}];document.getElementById('loadEdna')?.addEventListener('click',()=>{const tbody=document.getElementById('ednaTable').querySelector('tbody');tbody.innerHTML='';ednaSample.forEach(r=>{tbody.innerHTML+=`<tr><td>${r.species}</td><td>${r.confidence}</td><td>${r.abundance}</td><td>${r.status}</td></tr>`;});new Chart(ednaPie,{type:'pie',data:{labels:ednaSample.map(x=>x.species),datasets:[{data:ednaSample.map(x=>x.confidence),backgroundColor:['#ff8a80','#ffb74d','#81c784']}]}});});
trainBtn?.addEventListener('click',()=>{let log='';for(let i=1;i<=5;i++){log+=`Epoch ${i}: acc ${(0.7+i*0.05).toFixed(2)}
`;}document.getElementById('trainLog').textContent=log;});
document.getElementById('otoClassify')?.addEventListener('click',()=>{document.getElementById('otoResult').textContent='Predicted: Indian Mackerel (95%)';});
chatSend?.addEventListener('click',()=>{const inp=document.getElementById('chatInp');const box=document.getElementById('chatBox');box.innerHTML+=`<div><b>You:</b> ${inp.value}</div>`;setTimeout(()=>box.innerHTML+=`<div><b>AI:</b> Marine answer for '${inp.value}'</div>`,500);inp.value='';});